!function(){var a=Em.$,b=Em.get,c=Em.set,d=Em.Object.extend({sortable:"fa fa-sort",sortAsc:"fa fa-sort-asc",sortDesc:"fa fa-sort-desc",detailsClosed:"fa fa-chevron-right",detailsOpen:"fa fa-chevron-down",loadingRows:"fa fa-spinner fa-pulse fa-2x"}),e=Em.View.extend({tagName:"td",classNames:["table-component-row-toggle-cell"],rowData:null,icons:{},toggleIconClass:function(){return this.get(this.get("rowData._detailRowEnabled")?"icons.detailsOpen":"icons.detailsClosed")}.property("rowData._detailRowEnabled"),template:function(){var a="{{action '_toggledDetailRow' view.rowData._rowIndex view.rowData._detailRowEnabled}}",b="class='table-cell-button'",c="{{bind-attr class='view.toggleIconClass'}}";return Em.Handlebars.compile("<button "+a+" "+b+"><span "+c+"></span></button>")}.property("rowData._detailRowEnabled","rowData._rowIndex","toggleIconClass")}),f=Em.View.extend({tagName:"tr",classNames:["table-component-loading-row"],component:function(){return this.get("_parentView._parentView._parentView._parentView")}.property("_parentView._parentView._parentView._parentView"),template:function(){var a=this.get("component"),c=b(a,"_icons.loadingRows"),d=b(a,"_colspan");return Em.Handlebars.compile("<td class='table-component-loading-cell' colspan='"+d+"'>{{#if view.component.isLoadingRows}}<span class='table-component-loading-icon "+c+"'></span>{{/if}}</td>")}.property("component.isLoadingRows")}),g=Em.ContainerView.extend({tagName:"thead",classNames:["table-component-thead"]}),h=Em.ContainerView.extend({tagName:"tbody",classNames:["table-component-tbody"]}),i=Em.ContainerView.extend({tagName:"tfoot",classNames:["table-component-tfoot"],childViews:[f.create()]}),j=Em.ContainerView.extend({tagName:"table",classNames:["table-component-table","table"],classNameBindings:["condensed:table-condensed","striped:table-striped","bordered:table-bordered","hoverable:table-hoverable"],childViews:["thead","tbody","tfoot"],thead:g.create(),tbody:h.create(),tfoot:i.create(),showHeader:!0,hoverable:!0,striped:!1,condensed:!1,bordered:!1,icons:null,colspan:null,updateSortableHeaders:function(a,b){var c=this.get("thead").objectAt(0);c&&c.forEach(function(c,d){c.setProperties({sortSelection:a===d,sortAscending:b})})}}),k=Em.ContainerView.extend({tagName:"tr",classNames:["table-component-header-row"]}),l=Em.View.extend({tagName:"th",classNames:["table-component-header-cell"],classNameBindings:["colConfig.headerCellClassName"],attributeBindings:["width"],width:function(){return b(this,"colConfig.columnWidth")}.property("colConfig.columnWidth"),colConfig:null,icons:{},sortSelection:!1,sortAscending:!1,showTooltips:!0,sortIconClass:function(){return b(this,"sortSelection")?b(this,"sortAscending")?b(this,"icons.sortAsc"):b(this,"icons.sortDesc"):b(this,"icons.sortable")}.property("sortSelection","sortAscending"),template:function(){var a,c,d,e,f=this.get("colConfig"),g=b(f,"headerCellName"),h=b(f,"sortable"),i=b(f,"headerCellInfo"),j=i?"title='"+i+"' data-toggle='tooltip'":"",k=g;return h?(a="{{action '_sortTable' view.colConfig._columnIndex}}",c="class='table-cell-button table-component-header-cell-sort'",d="class='table-component-header-text'",e="{{bind-attr class=':table-component-sort-icon view.sortIconClass'}}",k="<button "+a+" "+c+" "+j+"><span "+d+">"+g+"</span><span "+e+"></span></button>"):k="<span class='table-component-header-text'"+j+">"+g+"</span>",Em.Handlebars.compile(k)}.property("colConfig","sortSelection","sortAscending"),didInsertElement:function(){this.get("showTooltips")&&this.$().find("[data-toggle='tooltip']").tooltip()}}),m=Em.ContainerView.extend({tagName:"tr",classNames:["table-component-row"]}),n=Em.View.extend({tagName:"td",classNames:["table-component-detail-row-cell"],attributeBindings:["colspan:colspan"],detailViewClass:null,row:null,colspan:null,template:Em.Handlebars.compile("<div class='table-component-detail-container'>{{view view.detailViewClass row=view.row.content}}</div>")}),o=Em.ContainerView.extend({tagName:"tr",classNames:["table-component-detail-row","collapse"],classNameBindings:["isEnabled:in"],isEnabled:function(){return this.get("row._detailRowEnabled")}.property("row._detailRowEnabled"),row:null}),p=Em.View.extend({tagName:"td",classNames:["table-component-cell"],classNameBindings:["colConfig.cellClassName"],attributeBindings:["width"],width:function(){return this.get("colConfig.columnWidth")}.property("colConfig.columnWidth"),colConfig:null,row:null,template:function(){var a=b(this,"colConfig"),c=b(a,"getCellContent"),d=b(a,"cellValuePath"),e=b(this,"row"),f="";return f=c?c(e,a):b(e,d),Em.Handlebars.compile(f.toString())}.property("row")}),q=Em.Object.extend({headerCellName:"",headerCellClassName:null,headerCellCustomViewClass:null,headerCellInfo:null,cellValuePath:null,cellClassName:null,cellCustomViewClass:null,getCellContent:null,columnWidth:null,sortAscending:!0,_columnIndex:null,sortOn:null,sort:function(a,c,d){c=c||[],a=a||Em.Object.create();var e=b(a,"getCellContent"),f=b(a,"cellValuePath"),g=b(a,"sortOn")&&"cellValuePath"===b(a,"sortOn");return!c.sort&&c.get("content")&&(c=c.get("content")),f||e?c.sort(e&&!g?function(b,c){var f=e(b,a),g=e(c,a);if(d){if(g>f)return-1;if(f>g)return 1}else{if(f>g)return-1;if(g>f)return 1}return 0}:function(a,c){var e=b(a,f),g=b(c,f);if(d){if(g>e)return-1;if(e>g)return 1}else{if(e>g)return-1;if(g>e)return 1}return 0}):(Em.Logger.warn("<Warning:> Table component's default sorting function requires that either cellValuePath or getCellContent are specified for each sortable column.  You must either specify one of these params to return the value for this column, or override this column's sort function. ",a),c)},_hasTooltipText:function(){return this.get("headerCellInfo")?!0:!1}.property("headerCellInfo")}),r=Em.ObjectProxy.extend({_rowIndex:null,_detailRowEnabled:!1}),s=Em.Component.extend({sortIndex:0,sortAscending:!0,rows:[],columns:[],icons:null,hoverable:!0,striped:!1,condensed:!1,responsive:!0,bordered:!1,customSortAction:null,noContentView:null,showHeader:!0,showTooltips:!0,useDefaultDetailRowToggle:!0,customDetailRowToggleAction:null,detailRowViewClass:null,hasDetailRows:!1,infiniteScrollEnabled:!1,isLoadingRows:!1,loadMoreAction:null,tagName:"div",classNames:["table-component"],classNameBindings:["responsive:table-responsive"],childViews:["_table"],_table:j.create(),_isRendering:!0,layout:Em.Handlebars.compile("{{#if _showNoContentView}}{{view noContentView}}{{else}}{{view _table bordered=bordered condensed=condensed striped=striped hoverable=hoverable showHeader=showHeader}}{{/if}}"),init:function(){this._super(),this._configureIcons(),this.get("showHeader")&&this._insertHeaderCells(),this._insertRows()},_rows:function(){var a=this.get("rows")||[],b=0;return this.get("_useNativeSort")&&(a=this._performNativeSort(a)),a.map(function(a){return r.create({content:a,_rowIndex:b++})})}.property("rows.[]"),sortingPropertiesChanged:function(){var a=this;Em.run.once(function(){a.get("_useNativeSort")?a.notifyPropertyChange("rows"):a.sendAction("customSortAction",a.get("sortIndex"),a.get("sortAscending"))})}.observes("sortAscending","sortIndex"),_cols:function(){var a=this.get("columns")||[],b=0;return a.map(function(a){var c=q.create(a);return c.set("_columnIndex",b++),c})}.property("columns"),_rowsChanged:function(){var a=this;Em.run.once(function(){a._removeRows(),a._insertRows()})}.observes("_rows.[]"),_icons:null,_configureIcons:function(){var a=this.get("icons")||{},b=d.create(a);this.set("_icons",b),this.set("_table.icons",b),this.set("_table.colspan",this.get("_colspan"))},_insertHeaderCells:function(){var a=this.get("_table.thead"),b=[],c=this.get("_icons"),d=this.get("showTooltips");this.get("_insertDefaultDetailToggle")&&b.push(Em.View.create({tagName:"th"})),this.get("_cols").forEach(function(a){var e=a.get("headerCellCustomViewClass")||l;b.push(e.create({colConfig:a,icons:c,showTooltips:d}))}),a.pushObject(k.create({childViews:b})),this._updateSortingIcons()},_updateSortingIcons:function(){var a=this.get("useDefaultDetailRowToggle")?this.get("sortIndex")+1:this.get("sortIndex");this.get("_table").updateSortableHeaders(a,this.get("sortAscending"))},_useNativeSort:function(){return null===this.get("customSortAction")}.property("customSortAction"),_performNativeSort:function(a){var c=this.get("sortAscending"),d=this.get("_cols").objectAt(this.get("sortIndex")),e=b(d,"sort");return e(d,a,c)},_insertRows:function(){var a=this,b=this.get("_table.tbody"),c=[];this.get("_rows").forEach(function(b){var d=m.create();a._insertCellsForRow(d,b),c.push(d),a.get("_detailRowsEnabled")&&c.push(a._createDetailRow(b))}),b.pushObjects(c)},_normalizeRowObject:function(a){return b(a,"content")},_createDetailRow:function(a){var b=n.create({colspan:this.get("_colspan"),row:a,detailViewClass:this.get("detailRowViewClass")}),c=o.create({row:a});return c.pushObject(b),c},_detailRowsEnabled:function(){var a=!1;return this.get("hasDetailRows")&&(null!==this.get("detailRowViewClass")?a=!0:Em.Logger.warn("<WARNING>: when hasDetailRows is true, you must also provide a view for the detailRowViewClass")),a}.property("hasDetailRows","detailRowViewClass"),_removeRows:function(){var a=this.get("_table.tbody");a.removeAllChildren()},_insertDefaultDetailToggle:function(){return this.get("_detailRowsEnabled")&&this.get("useDefaultDetailRowToggle")}.property("_detailRowsEnabled","useDefaultDetailRowToggle"),_insertCellsForRow:function(a,c){this.get("_insertDefaultDetailToggle")&&a.pushObject(e.create({rowData:c,icons:this.get("_icons")}));var d=this._normalizeRowObject(c);this.get("_cols").forEach(function(c){var e=b(c,"cellCustomViewClass");e||(e=p);var f=e.create({colConfig:c,row:d});a.pushObject(f)})},_showNoContentView:function(){return null!==this.get("noContentView")&&!this.get("_hasRows")}.property("_hasNoContentView","rows.[]"),_hasRows:function(){return this.get("rows")&&this.get("rows.length")>0}.property("rows.[]"),_numColumns:function(){return this.get("columns").length}.property("columns.[]"),_colspan:function(){return this.get("_detailRowsEnabled")&&this.get("useDefaultDetailRowToggle")?this.get("_numColumns")+1:this.get("_numColumns")}.property("columns.[]","useDefaultDetailRowToggle","_detailRowsEnabled"),_loadMoreRows:function(){this.get("loadMoreAction")&&!this.get("isLoadingRows")&&this.sendAction("loadMoreAction")},_showLoadingRow:function(){return this.get("infiniteScrollEnabled")&&this.get("isLoadingRows")}.property("isLoadingRows","infiniteScrollEnabled"),_attachInfiniteScrollListener:function(){var b=this;a(window).scroll(function(){a(window).scrollTop()===a(document).height()-a(window).height()&&b._loadMoreRows()})},didInsertElement:function(){this.get("infiniteScrollEnabled")&&this._attachInfiniteScrollListener()},actions:{_sortTable:function(a){a===this.get("sortIndex")?this.set("sortAscending",!this.get("sortAscending")):this.set("sortIndex",a),this._updateSortingIcons()},_toggledDetailRow:function(a,b){if(this.get("useDefaultDetailRowToggle")){var d=this.get("_rows").objectAt(a);c(d,"_detailRowEnabled",!b)}}}});Em.TableComponent=s,Em.Handlebars.helper("table-component",Em.TableComponent)}(this);